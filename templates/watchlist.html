<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Watchlist - Movie Recommender AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <link rel="preconnect" href="https://image.tmdb.org" crossorigin>
</head>
<body>
    <!-- Watchlist page: grid of saved titles with quick trailer and remove. -->
    <header>
        <div class="header-content">
            <h1>My Watchlist</h1>
            <nav>
                <a href="{{ url_for('home') }}" class="nav-link">ğŸ  Home</a>
                <a href="{{ url_for('view_watchlist') }}" class="nav-link active">ğŸ“‹ Watchlist ({{ user_stats.total_watchlist }})</a>
                <a href="{{ url_for('user_profile') }}" class="nav-link">ğŸ‘¤ Profile</a>
                {% if current_user.is_authenticated %}
                    <span class="nav-link" style="opacity:0.8;">ğŸ‘‹ {{ current_user.email }}</span>
                    <a href="{{ url_for('logout') }}" class="nav-link">ğŸšª Logout</a>
                {% endif %}
            </nav>
        </div>
    </header>

    <div class="container">
        {% if watchlist_movies %}
        <div id="movies">
            {% for movie in watchlist_movies %}
            <div class="movie">
                <img src="{{ movie.poster }}" alt="{{ movie.title }}" loading="lazy" decoding="async">

                <div class="movie-info">
                    <h3>{{ movie.title }}</h3>
                    <p>Release: {{ movie.release_date }}</p>
                    <p>Rating: â­ {{ movie.rating }}</p>
                    <p>{{ movie.overview }}</p>
                    
                    <div class="movie-actions">
                        <button class="details-btn" data-movie-id="{{ movie.id }}">
                            <i class="fas fa-info-circle"></i> Details
                        </button>
                        {% if movie.trailer %}
                        <a href="{{ movie.trailer }}" target="_blank" class="trailer-btn" data-movie-id="{{ movie.id }}">
                            <i class="fas fa-play"></i> Trailer
                        </a>
                        {% endif %}
                        <button class="watchlist-btn" data-movie-id="{{ movie.id }}">
                            <i class="fas fa-bookmark"></i> 
                            <span class="watchlist-text">Remove</span>
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <div class="empty-state">
                <i class="fas fa-bookmark" style="font-size: 5em; color: #FFD700; margin: 40px;"></i>
                <h2>Your watchlist is empty</h2>
                <p>Add movies you want to watch later!</p>
                <a href="{{ url_for('home') }}" class="trailer-btn" style="margin-top: 20px;">Browse Movies</a>
            </div>
        {% endif %}
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
